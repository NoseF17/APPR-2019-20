---
title: "Analiza tedenskih delovnih ur evropskih držav"
author: "Filip Nose"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding="UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, echo=FALSE, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# Izbira teme

Za vzorec bomo prikazali nekaj podatkov o slovenskih občinah.

![](slike/grb.png)

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, message=FALSE}
source("uvoz/uvoz.r", encoding="UTF-8")
```

Uvozil sem podatke o občinah v obliki CSV iz Eurostata. Podatke imam v treh razpredelnicah v obliki *tidy data*.

1. `tabela1_delovne_ure_moski_zenske` - podatki o številu delovnih ur za vsako državo po letih (ločeno po spolu in zaposlenosti)
  - `leto` - spremenljivka,
  - `drzava` - spremenljivka: ime države (neurejen faktor),
  - `spol` - spremenljivka (neurejen faktor),
  - `zaposlenost` - spremenljivka: polna zaposlenost, delna zaposlenost, skupaj (neurejen faktor),
  - `stevilo delovnih ur` - meritev: povprečno število tedenskih delovnih ur (število).
  
2. `tabela2gdp` - podatki o GDP na prebivalca za vsako državo po letih
  - `leto` - spremenljivka,
  - `drzava` - spremenljivka: ime države (neurejen faktor),
  - `vrednost` - meritev: GDP na prebivalca glede na trenutne tržne cene (število).
  
3. `tabela3panoge` - podatki o tedenskih delovnih urah po panogah za vsako evropsko državo po letih
  - `leto` - spremenljivka,
  - `drzava` - spremenljivka: ime države (neurejen faktor),
  - `spol` - spremenljivka (neurejen faktor),
  - `panoga` - spremenljivka: ime panoge (neurejen faktor),
  - `stevilo delovnih ur` - meritev: povprečno število tedenskih delovnih ur v določeni panogi (število).

 **Opomba**: da bi razpredelnica `obcine` res bila v obliki *tidy data*, bi morali odstraniti stolpec `gostota` (saj je izpeljan iz stolpcev `povrsina` in `prebivalci`), podatke o pokrajinah pa bi morali premakniti v drugo razpredelnico, saj nekatere občine pripadajo dvema pokrajinama. Podobno bi morali narediti tudi s stolpcem `odcepitev`.

***

# Analiza in vizualizacija podatkov

```{r vizualizacija, echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
source("vizualizacija/vizualizacija.r", encoding="UTF-8")
```

Spodnji graf prikazuje tedenske delovne ure Slovenije in jih primerja z evropskim povprečjem.

```{r graf2, echo=FALSE, message=FALSE, fig.align='center', warning = FALSE}
print(graf2)
```

Primerjava GDP-ja na prebivalca z stevilom delovnih ur za Slovenijo.
```{r primerjalni_graf_slo, echo=FALSE, message=FALSE, fig.align='center', warning = FALSE}
print(primerjalni_graf_slo)
```

Primerjava GDP-ja na prebivalca z stevilom delovnih ur za Evropo.
```{r primerjalni_graf_eu, echo=FALSE, message=FALSE, fig.align='center', warning = FALSE}
print(primerjalni_graf_eu)
```

Pri obeh opazimo da sta GDP in število delovnih ur obratno sorazmerna.


Histogram, ki prikazuje 3 najbolj delavne panoge v Sloveniji, zraven pa še evropsko povprečje za primerjavo.

```{r grafpanoge_top3, echo=FALSE, message=FALSE, fig.align='center', warning = FALSE}
print(grafpanoge_top3)
```

Histogram, ki prikazuje 3 najmanj delavne panoge v Sloveniji, zraven pa še evropsko povprečje za primerjavo.

```{r grafpanoge_low3, echo=FALSE, message=FALSE, fig.align='center', warning = FALSE}
print(grafpanoge_low3)
```

Spodnji zemljevid prikazuje povprečno velikost družine za vsako občino.



***

# Napredna analiza podatkov

```{r analiza, echo=FALSE, message=FALSE}
source("analiza/analiza.r", encoding="UTF-8")
```

Spodnji graf prikazuje povezavo med številom naselij in površino občine.



***

```{r shiny, echo=FALSE}
shinyAppDir("shiny", options=list(width="100%", height=600))
```
